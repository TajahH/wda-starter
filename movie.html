<!DOCTYPE html>
<html>

<head>
  <title>Showing Movie Data from an API</title>
  <link rel="stylesheet" href="./css/style.css" />
  <script type="module" src="./js/scripts.js"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body>
  <div x-data="movieComponent" x-init="init()">

    <div>
      <h1>Movie Project</h1>
    </div>
    <div class="page-section">
      <div class="movie-page-container">
        <p><a href="index.html">Return to movie list</a></p>
        <h2 class='movie-title' x-text="movie ? movie.title : 'Loading…'"></h2>
        <p x-text="movie ? (movie.overview || '') : ''"></p>

        <p>Year: <span x-text="movie ? (movie.release_date || '').slice(0,4) : ''"></span></p>

        <p>Genre: <span x-text="movie ? (movie.genres || []).map(g => g.name).join(', ') : ''"></span></p>

        <p>Duration: <span x-text="movie && movie.runtime ? (movie.runtime + ' min') : '—'"></span></p>
        <button type="button" @click="fetchTriggerWarnings()" :disabled="triggersLoading">
          <span x-show="!triggersLoading">Show content warnings</span>
          <span x-show="triggersLoading">Loading…</span>
        </button>

        <p x-show="triggersError" x-text="triggersError"></p>

        <section x-show="triggersBest && !triggersError">
          <h3 x-text="`${triggersBest.name} (${triggersBest.releaseYear || ''})`"></h3>
          <p x-text="triggersBest.overview || 'No summary available.'"></p>
        </section>

        <h2>Cast</h2>
        <ul>
          <template x-for="p in (cast || []).slice(0,10)" :key="p.id">
            <li>
              <span class="cast-list" x-text="p.name"></span>
              <span class="cast-list" x-text="p.character ? (' as ' + p.character) : ''"></span>
            </li>
          </template>
        </ul>
      </div>
    </div>
  </div>
</body>


</html>